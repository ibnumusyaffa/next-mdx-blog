---
date: 2023-09-27
category: Go
category_color: blue
title: "Kapan sebaiknya tidak menggunakan useEffect pada React"
description: ""
thumbnail: blog/go-gopher.png
show_thumbnail: false
show_toc: true
is_published: false
---

useEffect adalah salah satu hook yang wajib diketahui jika kita menggunakan React, tapi seringkali penggunaan useEffect yang tidak pada tempatnya menyebabkan kode menjadi susah dipahami dan menyebabkan bugs yang tidak diinginkan. kali ini kita akan membahas beberapa kasus dimana sebaiknya tidak menggunakan useEffect.

## Mengupdate state jika ada perubahan dari state/props lain

let say, semisal ketika mempunyai state `firstName` dan `lastName`, kita ingin membuat satu lagi state baru bernama `fullName`, dimana `fullName` adalah hasil kalkulasi dari `firstName` dan `lastName`. salah satu hal yag muncul dibenak kita adalah menggunakan useEffect, dimana state `fullName` akan diupdate ketika `firstName` atau `lastName` berubah.

```jsx
function Form() {
  const [firstName, setFirstName] = useState('John');
  const [lastName, setLastName] = useState('Doe');

  const [fullName, setFullName] = useState('');

  // ðŸ”´ Avoid: redundant state and unnecessary Effect
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
```
Ketika kita menjalankan kode diatas, nampaknya hasilnya baik-baik saja dimana fullName akan terupdate jika firstName atau lastName berubah, tetapi kode diatas mempunya problem. perhatikan flow rendering berikut

1. firstName atau lastName diupdate
2. component rerender, UI terupdate dengan firstName/lastName terbaru
3. useEffect tereksekusi, fullName diupdates
4. component rerender, UI terupdate dengan fullName terbaru

Dari flow diatas, kita bisa menyimpulkan perlu rerender component tambahan hanya untuk mengupdate state fullName dan kode yang lebih panjang dari yang seharusnya.

Mari kita coba ubah kode diatas menjadi sebagai berikut.
```jsx
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // âœ… Good: calculated during rendering
  const fullName = firstName + ' ' + lastName;
  // ...
}

```
Dari kode diatas, kita bisa mendapatkan state fullname tanpa rerender tambahan serta kode yang lebih ringkas. 

dari kasus diatas, hal yang perlu kita ingat adalah, **jika sebuah data bisa dapatkan dari kalkulasi props/state existing, jangan taruh data tersebut distate, melainkan kalkulasi saat rerender**. 



